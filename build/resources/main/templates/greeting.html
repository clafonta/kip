<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Greeting Page with Alpine.js</title>
    <!-- Alpine.js CDN -->
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            line-height: 1.6;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
        h1 {
            color: #333;
        }
        .message {
            color: #0066cc;
            font-weight: bold;
        }
        .date {
            color: #666;
            font-style: italic;
        }
        .interactive-section {
            margin-top: 30px;
            padding: 15px;
            background-color: #eef6ff;
            border-radius: 5px;
        }
        .counter-button {
            padding: 8px 15px;
            background-color: #0066cc;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
        }
        .counter-button:hover {
            background-color: #0055aa;
        }
        .counter-display {
            font-size: 18px;
            font-weight: bold;
        }
        .todo-input {
            padding: 8px;
            width: 70%;
            margin-right: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .todo-item {
            margin: 8px 0;
            padding: 8px;
            background-color: white;
            border-radius: 4px;
            display: flex;
            align-items: center;
        }
        .completed {
            text-decoration: line-through;
            color: #888;
        }
    </style>
</head>
<body>
<div class="container">
    <h1>Welcome to My Spring Boot Application</h1>
    <p class="message" th:text="${message}">Default message</p>
    <p class="date">Current date and time: <span th:text="${currentDate}">Date here</span></p>

    <div>
        <h2>Thymeleaf Features Demo</h2>
        <p>Conditional rendering:</p>
        <div th:if="${message.length() > 10}">The message is longer than 10 characters.</div>
        <div th:unless="${message.length() > 10}">The message is 10 characters or less.</div>

        <p>Iteration example:</p>
        <ul>
            <li th:each="i : ${#numbers.sequence(1, 5)}" th:text="'Item ' + ${i}">Item</li>
        </ul>
    </div>

    <!-- Alpine.js Interactive Elements -->
    <div class="interactive-section">
        <h2>Alpine.js Interactive Features</h2>

        <!-- Simple Counter Component -->
        <div x-data='{count: 0}' class="mb-4">
            <h3>Counter Example</h3>
            <button class="counter-button" x-on:click="count++">Increment</button>
            <button class="counter-button" x-on:click="count--">Decrement</button>
            <button class="counter-button" x-on:click="count = 0">Reset</button>
            <span class="counter-display" x-text="count"></span>
        </div>

        <!-- Todo List Component -->
        <div x-data='{
                newTodo: "",
                todos: [],
                addTodo() {
                    if (this.newTodo.trim() === "") return;
                    this.todos.push({ text: this.newTodo, completed: false });
                    this.newTodo = "";
                },
                toggleTodo(index) {
                    this.todos[index].completed = !this.todos[index].completed;
                },
                removeTodo(index) {
                    this.todos.splice(index, 1);
                }
            }'>
            <h3>Todo List Example</h3>
            <div>
                <input type="text" class="todo-input" x-model="newTodo" placeholder="Add a new task..."
                       @keyup.enter="addTodo()">
                <button class="counter-button" @click="addTodo()">Add</button>
            </div>

            <template x-if="todos.length === 0">
                <p>No tasks yet. Add one above!</p>
            </template>

            <template x-for="(todo, index) in todos" :key="index">
                <div class="todo-item">
                    <input type="checkbox" x-model="todo.completed" @click="toggleTodo(index)">
                    <span x-text="todo.text" :class="{ 'completed': todo.completed }" style="margin: 0 10px; flex-grow: 1;"></span>
                    <button @click="removeTodo(index)" style="background: #ff6b6b; color: white; border: none; border-radius: 4px; padding: 3px 8px; cursor: pointer;">Delete</button>
                </div>
            </template>
        </div>

        <!-- Text Transformation Component -->
        <div x-data='{
                inputText: "",
                get uppercaseText() { return this.inputText.toUpperCase() },
                get lowercaseText() { return this.inputText.toLowerCase() },
                get characterCount() { return this.inputText.length }
            }' class="mt-4">
            <h3>Text Transformer Example</h3>
            <input type="text" class="todo-input" x-model="inputText" placeholder="Type something...">
            <div style="margin-top: 10px;">
                <p><strong>Uppercase:</strong> <span x-text="uppercaseText"></span></p>
                <p><strong>Lowercase:</strong> <span x-text="lowercaseText"></span></p>
                <p><strong>Character Count:</strong> <span x-text="characterCount"></span></p>
            </div>
        </div>
    </div>
</div>
</body>
</html>